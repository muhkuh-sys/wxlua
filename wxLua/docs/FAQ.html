<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">

<HTML>
<HEAD>
  <META name="generator" content=
  "HTML Tidy for Cygwin (vers 1st September 2004), see www.w3.org">
  <META content="text/html; charset=us-ascii" http-equiv="content-type">

  <TITLE>wxLua FAQ</TITLE>
  <META content="John Labenski" name="author">
  <META content="wxLua FAQs" name="description">
  <LINK rel="stylesheet" type="text/css" href="wxlua.css">
</HEAD>

<BODY>
  <H1>wxLua 2.8.12 - FAQ</H1>

  <H2>Table of Contents</H2>

  <DIV class="contents">
    <OL>
      <LI>
        <A href="FAQ.html#C1">1 - Why wxLua?</A>

        <OL>
          <LI><A href="FAQ.html#C1.1">1.1 - What's best for my needs: wxLua,
          wxPython, wxSomethingElse?</A></LI>

          <LI><A href="FAQ.html#C1.2">1.2 - Can I use wxLua as script
          interpreter embedded in my own C++ applications?</A></LI>
        </OL>
      </LI>

      <LI>
        <A href="FAQ.html#C2">2 - How to learn wxLua</A>

        <OL>
          <LI><A href="FAQ.html#C2.1">2.1 - Read the wxLua
          documentation</A></LI>

          <LI><A href="FAQ.html#C2.2">2.2 - Read the C++ wxWidgets
          documentation</A></LI>

          <LI><A href="FAQ.html#C2.3">2.3 - Run and trace through the
          samples</A></LI>
        </OL>
      </LI>

      <LI>
        <A href="FAQ.html#C3">3 - Programming in wxLua</A>

        <OL>
          <LI><A href="FAQ.html#C3.1">3.1 - wxStrings?</A></LI>

          <LI><A href="FAQ.html#C3.2">3.2 - wxArrayString and
          wxSortedArrayString?</A></LI>

          <LI><A href="FAQ.html#C3.3">3.3 - wxArrayInt?</A></LI>

          <LI><A href="FAQ.html#C3.4">3.4 - When and how should you delete()
          objects?</A></LI>

          <LI><A href="FAQ.html#C3.5">3.5 - Why do the samples use the function
          main() and is it special to wxLua?</A></LI>

          <LI><A href="FAQ.html#C3.6">3.6 - Why are the arguments shifted +1
          for error messages from class member function calls?</A></LI>
        </OL>
      </LI>

      <LI>
        <A href="FAQ.html#C4">4 - Lua Module using require()</A>

        <OL>
          <LI><A href="FAQ.html#C4.1">4.1 - Why does the GUI not work from the
          Lua console?</A></LI>
        </OL>
      </LI>

      <LI>
        <A href="FAQ.html#C5">5 - Building wxLua</A>

        <OL>
          <LI><A href="FAQ.html#C5.1">5.1 - Why are there so many
          warnings?</A></LI>
        </OL>
      </LI>
    </OL>
  </DIV>

  <H2><A name="C1" id="C1"></A>1 - Why wxLua?</H2>

  <UL>
    <LI>Because the Lua language is easy and straightforward to program
    in.</LI>

    <LI>It vaguely looks like BASIC or C which many people are familiar
    with.</LI>

    <LI>The code is very readable, almost no special notation, gotchas, or
    oddball constructs that require a large shift in thinking from BASIC or
    C.</LI>

    <LI>Size : The Lua interpreter itself is ~100Kb, wxWidgets adds the
    remaining few Mb.</LI>

    <LI>Speed : Lua is one of the fastest interpreted languages; see the Great
    Computer Language Shootout.</LI>

    <LI>Again, why Lua? See <A href=
    "http://www.lua.org/about.html">http://www.lua.org/about.html</A></LI>
  </UL>

  <H3><A name="C1.1" id="C1.1"></A>1.1 - What's best for my needs: wxLua,
  wxPython, or wxSomethingElse?</H3>

  <UL>
    <LI>It depends, wxPython has a much larger footprint and greater overhead
    than wxLua, but it does provide more add-ons from the Python standard
    library.</LI>

    <LI>On the other hand, wxLua is is the size of wxWidgets + ~100Kb for Lua +
    ~500Kb for the wxLua library.</LI>

    <LI>wxLua is designed to be easily interfaced with C++ code making it a
    powerful extension language.</LI>

    <LI>In conclusion, if you want to write an entire application in a
    scripting language and you need things supported by Python which are not
    present in wxLua out-of-the-box, then you should use wxPython. Instead, if
    you want to write applications with little overhead or extend your C++
    applications, go for wxLua.</LI>
  </UL>

  <H3><A name="C1.2" id="C1.2"></A>1.2 - Can I use wxLua as script interpreter
  embedded in my own C++ applications?</H3>

  <UL>
    <LI>Yes, the C++ programming guide in the <A href=
    "wxlua.html#cpp_programming_guide">wxLua Manual</A> describes how to create
    and use a wxLuaState.</LI>

    <LI>This is one of the strong points of wxLua; it is a fast and lightweight
    interpreter that is easy to use to extend your application and let the user
    customize it...</LI>

    <LI>You may create as many wxLua interpreters in a single program as you
    like.</LI>
  </UL>

  <H2><A name="C2" id="C2"></A>2 - How to learn wxLua</H2>

  <H3><A name="C2.1" id="C2.1"></A>2.1 - Read the wxLua documentation</H3>

  <UL>
    <LI><A href="wxlua.html">wxlua.html</A> is the manual for wxLua that
    describes the Lua language as well as where the wxWidgets C++ types are
    placed in Lua and how to use them.</LI>

    <LI><A href="wxluaref.html">wxluaref.html</A> is an autogenerated document
    that can be thought of as a reference manual of what wxLua binds from
    wxWidgets. It also has usage notes for the cases where wxLua differs from
    C++ wxWidgets.</LI>

    <LI><A href="binding.html">binding.html</A> describes how to write your own
    bindings for a C or C++ library, but people who will only write Lua code
    should also read it to be able to interpret the <A href=
    "wxluaref.html">wxluaref.html</A> document.</LI>
  </UL>

  <H3><A name="C2.2" id="C2.2"></A>2.2 - Read the C++ wxWidgets
  documentation</H3>

  <UL>
    <LI>wxLua is mapped very closely to wxWidgets which means that descriptions
    for the C++ functions and values also apply to wxLua. See the <A href=
    "wxluaref.html">wxluaref.html</A> document to verify that this is the case
    and any non typical behavior will be clearly marked.</LI>

    <LI>See the wxWidgets Wiki for examples of code, beginner howtos, and other
    useful bits of information.</LI>

    <LI>See wxPython documentation and their Wiki, but note that wxLua follows
    the C++ notation a little closer than wxPython does.</LI>
  </UL>

  <H3><A name="C2.3" id="C2.3"></A>2.3 - Run and trace through the samples</H3>

  <UL>
    <LI>The wxLua samples try to show off various classes and their usage.</LI>

    <LI>unittest.wx.lua is used to confirm that wxLua is operating properly,
    however it provides a wealth of information about what is allowed in terms
    of calling functions, casting classes to other classes, using virtual
    functions, and derived functions.</LI>

    <LI>binding.wx.lua traverses the C structs that store the data used for
    wxLua and it's worth taking the time to browse them to see how it all fits
    together.</LI>
  </UL>

  <H2><A name="C3" id="C3"></A>3 - Programming in wxLua</H2>

  <H3><A name="C3.1" id="C3.1"></A>3.1 - wxStrings or ANSI Lua strings?</H3>

  <UL>
    <LI>wxLua uses Lua strings and so all functions that take or return a
    wxString take or return a Lua string.</LI>

    <LI>However, you can also use a wxString if you really want to.</LI>
  </UL>

  <H3><A name="C3.2" id="C3.2"></A>3.2 - wxArrayString and
  wxSortedArrayString?</H3>

  <UL>
    <LI>All functions that take a wxArrayString or wxSortedArrayString can also
    take a numerically indexed Lua table of strings.</LI>

    <LI>Functions that return wxArrayStrings or wxSortedArrayStrings will
    return a wxArrayString or wxSortedArrayString unless specified otherwise in
    <A href="wxluaref.html">wxluaref.html</A></LI>
  </UL>

  <H3><A name="C3.3" id="C3.3"></A>3.3 - wxArrayInt?</H3>

  <UL>
    <LI>All functions that take a wxArrayInt can also take a numerically
    indexed table of numbers.</LI>

    <LI>Functions that return wxArrayInts will return a wxArrayInt unless
    specified otherwise in <A href="wxluaref.html">wxluaref.html</A>.</LI>
  </UL>

  <H3><A name="C3.4" id="C3.4"></A>3.4 - When and how should you delete()
  objects?</H3>

  <UL>
    <LI>You should read the subsection "C++ Classes CLASS_NAME" of the
    "Programming in wxLua" section of the <A href="wxlua.html">wxlua.html</A>
    manual.</LI>

    <LI>In short, all objects that you create that deal with graphics should be
    delete()ed as soon as they're no longer used. Functions that take a
    "<CODE>const wxPen&amp; pen</CODE>" or any wxObject derived class that are
    passed to a function that is const and not a pointer* will make a refed
    copy of them and so you may delete them.</LI>

    <LI>Use the function "<CODE>t = wxlua.GetGCUserdataInfo()</CODE>" to get a
    table of items that are tracked and either have an active variable pointing
    to them or are waiting to be garbage collected.</LI>

    <LI>Class objects that have the <CODE>%delete</CODE> tag in their
    declaration (see <A href="wxluaref.html">wxluaref.html</A>) will be
    automatically garbage collected or can be delete()ed with the wxLua added
    function for the class. There are, of course, exceptions and these occur
    when you pass the object to a function with the <CODE>%ungc</CODE> tag on
    the parameter you pass the object to. The ungarbage collect tag specifies
    that the object is now owned by something else and you can no longer delete
    it in wxLua.</LI>

    <LI>Bottom line - don't worry about delete()ing anything except:

      <UL>
        <LI>Graphics objects (for MSW really).</LI>

        <LI>Classes that specifically state (in <A href=
        "wxluaref.html">wxluaref.html</A>) that you should delete() them
        because the garbage collector may not do so soon enough.</LI>

        <LI>Objects that may be very large, like a wxImage(1000, 1000).</LI>
      </UL>
    </LI>
  </UL>

  <H3><A name="C3.5" id="C3.5"></A>3.5 - Why do the samples use the function
  main() and is it special to wxLua?</H3>

  <UL>
    <LI>There's nothing special about the function main() other than that it's
    a common name for an entry point into a program.</LI>

    <LI>It is often helpful and a good idea to encapsulate the program
    initialization code within a function so that you can use local variables
    and not pollute the global table with temporary variables that won't be
    needed again.</LI>

    <LI>Additionally, it allows you to break out of this initialization code at
    any point by putting "<CODE>do return end</CODE>" inside of the function
    for debugging, as opposed to wrapping parts you don't want using
    <SPAN style="font-style: italic;">"if false then ... end"</SPAN>.</LI>
  </UL>

  <H3><A name="C3.6" id="C3.6"></A>3.6 - Why are the arguments shifted +1 for
  error messages from class member function calls?</H3>

  <UL>
    <LI>Because the ':' calling convention is syntaxic sugar for putting the
    'self' as the first parameter.</LI>

    <LI><CODE>s = wx.wxSize(1, 2); s:Set(3, 4)</CODE> is the same as
    <CODE>s.Set(s, 3, 4)</CODE> and the first parameter is always the self,
    therefore <CODE>s.Set(s, "hello", 4)</CODE> or <CODE>s:Set("hello",
    4)</CODE> will give an error that parameter 2 is not a number.</LI>

    <LI>Unfortunately there is no way to tell whether the user has used the '.'
    or ':' calling convention and so the error message cannot be tailored for
    both static and nonstatic member functions. Just remember that the first
    parameter for nonstatic class member functions called using the ':'
    notation is the 'self'.</LI>
  </UL>

  <H2><A name="C4" id="C4"></A>4 - Lua Module using require()</H2>

  <H3><A name="C4.1" id="C4.1"></A>4.1 - Why does the GUI not work from the Lua
  console?</H3>

  <UL>
    <LI>wxLua is a user-interactive GUI library and requires an event-loop to
    process user interaction with the controls, E.G. key presses and
    mouse-clicks.</LI>

    <LI>wxlua.html in section <A href="wxlua.html#C6.1">6.1 - How to Run the
    Samples</A> has more informaton about using wxLua from the Lua
    console.</LI>

    <LI>Briefly - In order to use wxLua as a module, the Lua code must have
    <CODE class="codelua">require("wx")</CODE> to load the wxLua bindings in
    the beginning and <CODE class="codelua">wx.wxGetApp():MainLoop()</CODE> at
    the end to run the wxWidgets event loop.</LI>

    <LI>When <CODE class="codelua">wx.wxGetApp():MainLoop()</CODE> is called,
    the console will appear to be hung, but you have simply started the
    wxWidgets event-loop and the program is waiting for you to press buttons,
    open menus...</LI>

    <LI>A soon as there are no more top-level windows open the MainLoop() exits
    and control is either returned to the Lua console or, if run without the
    console, the whole program exits.</LI>
  </UL>

  <H2><A name="C5" id="C5"></A>5 - Building wxLua</H2>

  <H3><A name="C5.1" id="C5.1"></A>5.1 - Why are there so many warnings?</H3>

  <UL>
    <LI>wxLua was initially written before 2000 for wxWindows (now wxWidgets)
    2.2</LI>

    <LI>As wxWidgets changes so too must wxLua and wxWidgets marks functions no
    longer used as deprecated in one release and removes them in the next
    release.</LI>

    <LI>This means that for wxLua to support wxWidgets 2.8, we use deprecated
    functions from 2.6, for 2.9 we use deprecated functions from 2.8...</LI>

    <LI>So, to some extent, having these warnings is intentional, though
    unfortunate.</LI>
  </UL>
</BODY>
</HTML>
